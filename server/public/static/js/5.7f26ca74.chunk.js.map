{"version":3,"sources":["../node_modules/react-bootstrap/esm/ButtonToolbar.js","views/detail/index.js","graphql/Book.js","../node_modules/react-bootstrap/esm/Button.js"],"names":["ButtonToolbar","React","forwardRef","_ref","ref","bsPrefix","className","props","_objectWithoutPropertiesLoose","prefix","useBootstrapPrefix","createElement","_extends","classNames","displayName","defaultProps","role","Detail","history","useHistory","id","useParams","pollInterval","query","GET_BOOK","variables","bookId","loading","error","data","message","book","_id","isbn","author","description","published_year","publisher","updated_date","Card","Header","to","as","Body","mutation","DELETE_BOOK","key","onCompleted","push","removeBook","onSubmit","e","preventDefault","Button","variant","Link","type","ADD_BOOK","gql","UPDATE_BOOK","GET_BOOKS","size","active","block","classes","href","SafeAnchor","disabled","Component"],"mappings":"sMAQIA,EAAgBC,IAAMC,YAAW,SAAUC,EAAMC,GACnD,IAAIC,EAAWF,EAAKE,SAChBC,EAAYH,EAAKG,UACjBC,EAAQC,YAA8BL,EAAM,CAAC,WAAY,cAEzDM,EAASC,YAAmBL,EAAU,eAC1C,OAAOJ,IAAMU,cAAc,MAAOC,YAAS,GAAIL,EAAO,CACpDH,IAAKA,EACLE,UAAWO,IAAWP,EAAWG,SAGrCT,EAAcc,YAAc,gBAC5Bd,EAAce,aAfK,CACjBC,KAAM,WAeOhB,Q,QCuEAiB,UAtFf,WACE,IAAMC,EAAUC,cACRC,EAAOC,cAAPD,GAER,OACE,kBAAC,IAAD,CACEE,aAAc,IACdC,MAAOC,IACPC,UAAW,CACTC,OAAQN,KAGT,YAA+B,IAA5BO,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,MAAOC,EAAW,EAAXA,KAClB,GAAIF,EAAS,MAAO,aACpB,GAAIC,EAAO,MAAM,UAAN,OAAiBA,EAAME,SAClC,IAAKD,EAAKE,KAAM,OAAO,KAHM,MAOzBF,EADFE,KAAQC,EANmB,EAMnBA,IAAKC,EANc,EAMdA,KAAMC,EANQ,EAMRA,OAAQC,EANA,EAMAA,YAAaC,EANb,EAMaA,eAAgBC,EAN7B,EAM6BA,UAAWC,EANxC,EAMwCA,aAGrE,OACE,kBAACC,EAAA,EAAD,KACE,kBAACA,EAAA,EAAKC,OAAN,KACE,2CAEE,kBAAC,IAAD,CAAMC,GAAG,IAAInC,UAAU,KAAKoC,GAAG,OAA/B,eAMJ,kBAACH,EAAA,EAAKI,KAAN,KACE,4BACE,qCACA,4BAAKV,GAEL,uCACA,4BAAKC,GAEL,2CACA,4BAAKC,GAEL,8CACA,4BAAKC,GAEL,yCACA,4BAAKC,GAEL,uCACA,4BAAKC,IAGP,kBAAC,IAAD,CAAUM,SAAUC,IAAaC,IAAKd,EAAKe,YAAa,kBAAM7B,EAAQ8B,KAAK,QACxE,SAACC,EAAD,OAAetB,EAAf,EAAeA,QAASC,EAAxB,EAAwBA,MAAxB,OACC,6BACE,0BACEsB,SAAU,SAAAC,GACRA,EAAEC,iBACFH,EAAW,CACTxB,UAAW,CAAEL,GAAIY,OAIrB,kBAAC,EAAD,KACE,kBAACqB,EAAA,EAAD,CAAQC,QAAQ,kBAAkBZ,GAAIa,IAAMd,GAAE,gBAAWT,IAAzD,gBAGA,kBAACqB,EAAA,EAAD,CAAQC,QAAQ,iBAAiBE,KAAK,UAAtC,kBAKH7B,GAAW,yCACXC,GAAS,mE,qtDC9EvB,IAAM6B,EAAWC,IAAH,KAsBRb,EAAca,IAAH,KAQXC,EAAcD,IAAH,KAwBXE,EAAYF,IAAH,KAUTlC,EAAWkC,IAAH,M,gCClErB,iEAYIL,EAASpD,IAAMC,YAAW,SAAUC,EAAMC,GAC5C,IAAIC,EAAWF,EAAKE,SAChBiD,EAAUnD,EAAKmD,QACfO,EAAO1D,EAAK0D,KACZC,EAAS3D,EAAK2D,OACdxD,EAAYH,EAAKG,UACjByD,EAAQ5D,EAAK4D,MACbP,EAAOrD,EAAKqD,KACZd,EAAKvC,EAAKuC,GACVnC,EAAQC,YAA8BL,EAAM,CAAC,WAAY,UAAW,OAAQ,SAAU,YAAa,QAAS,OAAQ,OAEpHM,EAASC,YAAmBL,EAAU,OACtC2D,EAAUnD,IAAWP,EAAWG,EAAQqD,GAAU,SAAUrD,EAAS,IAAM6C,EAASS,GAAStD,EAAS,SAAUoD,GAAQpD,EAAS,IAAMoD,GAE3I,GAAItD,EAAM0D,KACR,OAAOhE,IAAMU,cAAcuD,IAAYtD,YAAS,GAAIL,EAAO,CACzDmC,GAAIA,EACJtC,IAAKA,EACLE,UAAWO,IAAWmD,EAASzD,EAAM4D,UAAY,eAIjD/D,IACFG,EAAMH,IAAMA,GAGTsC,IACHnC,EAAMiD,KAAOA,GAGf,IAAIY,EAAY1B,GAAM,SACtB,OAAOzC,IAAMU,cAAcyD,EAAWxD,YAAS,GAAIL,EAAO,CACxDD,UAAW0D,QAGfX,EAAOvC,YAAc,SACrBuC,EAAOtC,aA1CY,CACjBuC,QAAS,UACTQ,QAAQ,EACRK,UAAU,EACVX,KAAM,UAuCOH","file":"static/js/5.7f26ca74.chunk.js","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  role: 'toolbar'\n};\nvar ButtonToolbar = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'btn-toolbar');\n  return React.createElement(\"div\", _extends({}, props, {\n    ref: ref,\n    className: classNames(className, prefix)\n  }));\n});\nButtonToolbar.displayName = 'ButtonToolbar';\nButtonToolbar.defaultProps = defaultProps;\nexport default ButtonToolbar;","import React from 'react'\r\nimport { Link, useHistory, useParams } from 'react-router-dom'\r\nimport { Query, Mutation } from 'react-apollo'\r\nimport { GET_BOOK, DELETE_BOOK } from '@/graphql/Book'\r\nimport { Card, ButtonToolbar, Button } from 'react-bootstrap'\r\n\r\nfunction Detail() {\r\n  const history = useHistory()\r\n  const { id } = useParams()\r\n\r\n  return (\r\n    <Query\r\n      pollInterval={500}\r\n      query={GET_BOOK}\r\n      variables={{\r\n        bookId: id\r\n      }}\r\n    >\r\n      {({ loading, error, data }) => {\r\n        if (loading) return 'Loading...'\r\n        if (error) return `Error! ${error.message}`\r\n        if (!data.book) return null\r\n\r\n        const {\r\n          book: { _id, isbn, author, description, published_year, publisher, updated_date }\r\n        } = data\r\n\r\n        return (\r\n          <Card>\r\n            <Card.Header>\r\n              <div>\r\n                Book Detail\r\n                <Link to=\"/\" className=\"fr\" as=\"div\">\r\n                  Book List\r\n                </Link>\r\n              </div>\r\n            </Card.Header>\r\n\r\n            <Card.Body>\r\n              <dl>\r\n                <dt>ISBN:</dt>\r\n                <dd>{isbn}</dd>\r\n\r\n                <dt>Author:</dt>\r\n                <dd>{author}</dd>\r\n\r\n                <dt>Description</dt>\r\n                <dd>{description}</dd>\r\n\r\n                <dt>Published Year</dt>\r\n                <dd>{published_year}</dd>\r\n\r\n                <dt>Publisher</dt>\r\n                <dd>{publisher}</dd>\r\n\r\n                <dt>Updated</dt>\r\n                <dd>{updated_date}</dd>\r\n              </dl>\r\n\r\n              <Mutation mutation={DELETE_BOOK} key={_id} onCompleted={() => history.push('/')}>\r\n                {(removeBook, { loading, error }) => (\r\n                  <div>\r\n                    <form\r\n                      onSubmit={e => {\r\n                        e.preventDefault()\r\n                        removeBook({\r\n                          variables: { id: _id }\r\n                        })\r\n                      }}\r\n                    >\r\n                      <ButtonToolbar>\r\n                        <Button variant=\"outline-primary\" as={Link} to={`/edit/${_id}`}>\r\n                          编辑\r\n                        </Button>\r\n                        <Button variant=\"outline-danger\" type=\"submit\">\r\n                          删除\r\n                        </Button>\r\n                      </ButtonToolbar>\r\n                    </form>\r\n                    {loading && <p>Loading...</p>}\r\n                    {error && <p>Error :( Please try again</p>}\r\n                  </div>\r\n                )}\r\n              </Mutation>\r\n            </Card.Body>\r\n          </Card>\r\n        )\r\n      }}\r\n    </Query>\r\n  )\r\n}\r\n\r\nexport default Detail\r\n","import gql from \"graphql-tag\"\r\n\r\nexport const ADD_BOOK = gql`\r\n  mutation AddBook(\r\n    $isbn: String!\r\n    $title: String!\r\n    $author: String!\r\n    $description: String!\r\n    $publisher: String!\r\n    $published_year: Int!\r\n  ) {\r\n    addBook(\r\n      isbn: $isbn\r\n      title: $title\r\n      author: $author\r\n      description: $description\r\n      publisher: $publisher\r\n      published_year: $published_year\r\n    ) {\r\n      _id\r\n    }\r\n  }\r\n`\r\n\r\nexport const DELETE_BOOK = gql`\r\n  mutation removeBook($id: String!) {\r\n    removeBook(id: $id) {\r\n      _id\r\n    }\r\n  }\r\n`\r\n\r\nexport const UPDATE_BOOK = gql`\r\n  mutation updateBook(\r\n    $id: String!\r\n    $isbn: String!\r\n    $title: String!\r\n    $author: String!\r\n    $description: String!\r\n    $publisher: String!\r\n    $published_year: Int!\r\n  ) {\r\n    updateBook(\r\n      id: $id\r\n      isbn: $isbn\r\n      title: $title\r\n      author: $author\r\n      description: $description\r\n      publisher: $publisher\r\n      published_year: $published_year\r\n    ) {\r\n      updated_date\r\n    }\r\n  }\r\n`\r\n\r\nexport const GET_BOOKS = gql`\r\n  {\r\n    books {\r\n      _id\r\n      title\r\n      author\r\n    }\r\n  }\r\n`\r\n\r\nexport const GET_BOOK = gql`\r\n  query book($bookId: String) {\r\n    book(id: $bookId) {\r\n      _id\r\n      isbn\r\n      title\r\n      author\r\n      description\r\n      published_year\r\n      publisher\r\n      updated_date\r\n    }\r\n  }\r\n`\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport SafeAnchor from './SafeAnchor';\nvar defaultProps = {\n  variant: 'primary',\n  active: false,\n  disabled: false,\n  type: 'button'\n};\nvar Button = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      size = _ref.size,\n      active = _ref.active,\n      className = _ref.className,\n      block = _ref.block,\n      type = _ref.type,\n      as = _ref.as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"variant\", \"size\", \"active\", \"className\", \"block\", \"type\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'btn');\n  var classes = classNames(className, prefix, active && 'active', prefix + \"-\" + variant, block && prefix + \"-block\", size && prefix + \"-\" + size);\n\n  if (props.href) {\n    return React.createElement(SafeAnchor, _extends({}, props, {\n      as: as,\n      ref: ref,\n      className: classNames(classes, props.disabled && 'disabled')\n    }));\n  }\n\n  if (ref) {\n    props.ref = ref;\n  }\n\n  if (!as) {\n    props.type = type;\n  }\n\n  var Component = as || 'button';\n  return React.createElement(Component, _extends({}, props, {\n    className: classes\n  }));\n});\nButton.displayName = 'Button';\nButton.defaultProps = defaultProps;\nexport default Button;"],"sourceRoot":""}